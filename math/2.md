### 四个球颜色统一问题

- **公司标签**：JT

---

#### 题目描述

有四个球，初始时两个黑色和两个白色。您随机挑选两个并将它们的颜色翻转，然后重复这一过程。问需要进行多少次操作才能确保四个球的颜色相同？

---

### 题解

我们需要计算从初始状态（2黑2白）出发，通过随机翻转两个球的颜色，达到所有四个球颜色相同（全部黑色或全部白色）的期望操作次数。

---

#### 解题步骤

1. **状态定义**
   
   首先，明确系统可能处于的状态：

   - **状态 A**：2黑2白（初始状态）
   - **状态 B**：4黑0白（目标状态）
   - **状态 C**：0黑4白（目标状态）

   目标是从 **状态 A** 转移到 **状态 B** 或 **状态 C**。

2. **转移概率计算**
   
   在 **状态 A** 下，随机选择两个球有以下可能性：

   - **选择两黑球**：将它们翻转为白色，转移到 **状态 C**。
   - **选择两白球**：将它们翻转为黑色，转移到 **状态 B**。
   - **选择一黑一白球**：将它们各自翻转颜色，仍然保持 **状态 A**。

   具体概率计算：

   - **总的选择方式**：$C(4, 2) = 6$ 种。
     - **选择两黑球**：$C(2, 2) = 1$ 种，概率 $\frac{1}{6}$。
     - **选择两白球**：$C(2, 2) = 1$ 种，概率 $\frac{1}{6}$。
     - **选择一黑一白球**：剩余的4种，概率 $\frac{4}{6} = \frac{2}{3}$。

3. **建立期望值方程**
   
   设 $E$ 为从 **状态 A** 到达 **状态 B** 或 **状态 C** 所需的期望操作次数。

   每进行一次操作，有以下情况：

   - **以概率 $\frac{1}{6}$** 转移到 **状态 B**，操作结束，不需要更多操作。
   - **以概率 $\frac{1}{6}$** 转移到 **状态 C**，操作结束，不需要更多操作。
   - **以概率 $\frac{2}{3}$** 保持在 **状态 A**，需要继续操作，期望操作次数仍为 $E$。

   因此，期望值方程为：

   $$
   E = 1 + \left( \frac{2}{3} \right) E
   $$

   **解释：**
   - **1**：当前进行的一次操作。
   - **$\frac{2}{3} E$**：在有 $\frac{2}{3}$ 的概率下，仍然处于 **状态 A**，因此需要额外的 $E$ 次操作。

4. **求解方程**
   
   通过代数运算解方程：

   $$
   E = 1 + \frac{2}{3} E
   $$

   移项得：

   $$
   E - \frac{2}{3} E = 1
   $$

   $$
   \frac{1}{3} E = 1
   $$

   $$
   E = 3
   $$

5. **结论**
   
   因此，**期望需要进行3次操作**才能确保四个球的颜色全部相同

---

